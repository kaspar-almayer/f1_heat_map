(this.webpackJsonpmatrix=this.webpackJsonpmatrix||[]).push([[1],{17:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(10),i=n.n(c),s=(n(17),n(0)),u=n.n(s),l=n(8),o=n(3),d=(n(9),n(4)),j=function(e){var t=e.split(":"),n=t[1].split("."),r=60*Number(t[0])+Number(n[0]);return Number("".concat(r,".").concat(n[1]))},p=function(e){var t=Math.floor(e/60),n=String((e%60).toFixed(3)).padStart(6,"0");return"".concat(t,":").concat(n)},b=function(e,t,n){if(e<t[0]||e>t[1])return"hsl(0, 0%, 50%)";var r=(e-t[0])*Number(n)/(t[1]-t[0]);return"hsl(".concat(r,", 100%, 50%)")},h=function(e){if(e.sort((function(e,t){return e-t})),e.length%2===0){var t=e.length/2;return(e[t-1]+e[t])/2}return e[Math.round(e.length/2)]},m=function(e){return e.data.reduce((function(e,t){return t.timings&&e.push(t.timings),e}),[]).flat()},v=n(1),f=function(e){var t=e.laps,n=e.range,r=e.driver,a=e.colors,c=e.fontSize;return Object(v.jsxs)("div",{className:"column",children:[Object(v.jsx)("p",{className:"driver-name",children:r}),t.map((function(e,t){return Object(v.jsx)("p",{style:{backgroundColor:b(j(e),n,a),fontSize:"".concat(c,"px")},children:e},t)}))]})},O=n(12),x=Object(O.a)("https://rkpsepkibztbweplxsli.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJrcHNlcGtpYnp0YndlcGx4c2xpIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTc0NzE4MDAsImV4cCI6MTk3MzA0NzgwMH0.-TsomBTEZlmHZ6cS3qqbF7f1G8OLsNSgMkquuPrt1PA");var g=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),i=Object(o.a)(c,2),s=i[0],b=i[1],O=Object(r.useState)([]),g=Object(o.a)(O,2),N=g[0],w=g[1],S=Object(r.useState)(!0),_=Object(o.a)(S,2),I=_[0],M=_[1],k=Object(r.useState)(!1),y=Object(o.a)(k,2),C=y[0],z=y[1],T=Object(r.useState)("150"),J=Object(o.a)(T,2),F=J[0],E=J[1],q=Object(r.useState)("7"),L=Object(o.a)(q,2),Z=L[0],B=L[1],G=Object(r.useState)("14"),P=Object(o.a)(G,2),Y=P[0],A=P[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.from("races").select("*").eq("round","11");case 3:return t=e.sent,n=t.data,r=t.error,e.next=8,x.from("races").select("id,short_name").order("round",{ascending:!1});case 8:if(c=e.sent,i=c.data,c.error,n&&(a(n[0]),M(!1)),i&&b(i),!r){e.next=15;break}throw r;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),M(!1),z(!0);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(r.useEffect)((function(){n&&w(function(e,t){var n=e.map((function(e){return j(e)})),r=Math.round(h(n)),a=n.filter((function(e){return e<r+t}));return[Math.min.apply(Math,Object(d.a)(a)),Math.max.apply(Math,Object(d.a)(a))]}(m(n),Number(Z)))}),[n,Z]);var H=Object(r.useMemo)((function(){return n?function(e,t){var n=e.map((function(e){return j(e)}));return Math.round(h(n))+t}(m(n),Number(Z)):0}),[n,Z]);return Object(v.jsxs)("div",{className:"app-wrapper",children:[Object(v.jsxs)("header",{className:"main-header",children:[Object(v.jsxs)("h1",{children:["Lap times heat map | ",null===n||void 0===n?void 0:n.race_name]}),Object(v.jsxs)("div",{className:"race-input",children:[Object(v.jsx)("label",{htmlFor:"races",children:"select race:"}),Object(v.jsx)("select",{name:"races",id:"races",value:null===n||void 0===n?void 0:n.id,onChange:function(e){var t=function(){var t=Object(l.a)(u.a.mark((function t(){var n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.from("races").select("*").eq("id",null===e||void 0===e||null===(n=e.currentTarget)||void 0===n?void 0:n.value);case 3:r=t.sent,c=r.data,r.error,c&&a(c[0]),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();t()},children:s.map((function(e){return Object(v.jsx)("option",{value:e.id,children:e.short_name},e.id)}))})]})]}),Object(v.jsxs)("main",{children:[Object(v.jsxs)("div",{className:"settings-wrapper",children:[Object(v.jsxs)("div",{className:"settings-input",children:[Object(v.jsx)("label",{children:"adjust colors:"}),Object(v.jsx)("input",{type:"range",min:"0",max:"300",value:F,onChange:function(e){var t;E(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.value)}})]}),Object(v.jsxs)("div",{className:"settings-input",children:[Object(v.jsxs)("label",{children:["exclued times over: ",Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:p(H)})]}),Object(v.jsx)("input",{type:"range",min:"1",max:"30",value:Z,onChange:function(e){var t;B(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.value)}})]}),Object(v.jsxs)("div",{className:"settings-input",children:[Object(v.jsxs)("label",{children:["heat map size: ",Y]}),Object(v.jsx)("input",{type:"range",min:"7",max:"20",value:Y,onChange:function(e){var t;A(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.value)}})]})]}),I?Object(v.jsx)("p",{children:"loading..."}):null,C?Object(v.jsx)("p",{children:"There was a problem with data, please try again later."}):null,n?Object(v.jsx)("div",{className:"columns-wrapper",children:n.data.map((function(e,t){return e.timings&&Object(v.jsx)(f,{laps:e.timings,range:N,driver:e.driver,colors:F,fontSize:Y},t)}))}):null]}),Object(v.jsxs)("footer",{children:[Object(v.jsxs)("p",{children:["lap times data:"," ",Object(v.jsx)("a",{href:"http://ergast.com/mrd/",children:"http://ergast.com/mrd/"})]}),Object(v.jsxs)("p",{children:["inspiration:"," ",Object(v.jsx)("a",{href:"https://www.reddit.com/r/formula1/comments/tps40h/2022_saudi_arabian_grand_prix_lap_time_heat_map/",children:"https://www.reddit.com/r/formula1/comments/tps40h/2022_saudi_arabian_grand_prix_lap_time_heat_map/"})]})]})]})},N=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,27)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(g,{})}),document.getElementById("root")),N()},9:function(e,t,n){}},[[23,2,3]]]);
//# sourceMappingURL=main.46528dd4.chunk.js.map