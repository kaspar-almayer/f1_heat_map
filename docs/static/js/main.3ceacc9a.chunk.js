(this.webpackJsonpmatrix=this.webpackJsonpmatrix||[]).push([[1],{17:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(10),i=n.n(c),s=(n(17),n(0)),u=n.n(s),l=n(5),o=n(3),d=(n(9),n(4)),j=function(e){var t=e.split(":"),n=t[1].split("."),r=60*Number(t[0])+Number(n[0]);return Number("".concat(r,".").concat(n[1]))},p=function(e){var t=Math.floor(e/60),n=String((e%60).toFixed(3)).padStart(6,"0");return"".concat(t,":").concat(n)},b=function(e,t,n){if(e<t[0]||e>t[1])return"hsl(0, 0%, 50%)";var r=(e-t[0])*Number(n)/(t[1]-t[0]);return"hsl(".concat(r,", 100%, 50%)")},h=function(e){if(e.sort((function(e,t){return e-t})),e.length%2===0){var t=e.length/2;return(e[t-1]+e[t])/2}return e[Math.round(e.length/2)]},m=function(e){return e.data.reduce((function(e,t){return t.timings&&e.push(t.timings),e}),[]).flat()},v=n(12),f=Object(v.a)("https://rkpsepkibztbweplxsli.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJrcHNlcGtpYnp0YndlcGx4c2xpIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTc0NzE4MDAsImV4cCI6MTk3MzA0NzgwMH0.-TsomBTEZlmHZ6cS3qqbF7f1G8OLsNSgMkquuPrt1PA"),O=n(1),x=function(e){var t=e.laps,n=e.range,r=e.driver,a=e.colors,c=e.fontSize;return Object(O.jsxs)("div",{className:"column",children:[Object(O.jsx)("p",{className:"driver-name",children:r}),t.map((function(e,t){return Object(O.jsx)("p",{style:{backgroundColor:b(j(e),n,a),fontSize:"".concat(c,"px")},children:e},t)}))]})};var g=function(e){var t=e.race,n=e.setRace,a=Object(r.useState)([]),c=Object(o.a)(a,2),i=c[0],s=c[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.from("races").select("id,short_name").order("round",{ascending:!1});case 3:if(t=e.sent,n=t.data,r=t.error,n&&s(n),!r){e.next=9;break}throw r;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(O.jsx)(O.Fragment,{children:i.length?Object(O.jsxs)("div",{className:"race-input",children:[Object(O.jsx)("label",{htmlFor:"races",children:"select race:"}),Object(O.jsx)("select",{name:"races",id:"races",value:null===t||void 0===t?void 0:t.id,onChange:function(e){var t=function(){var t=Object(l.a)(u.a.mark((function t(){var r,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.from("races").select("*").eq("id",null===e||void 0===e||null===(r=e.currentTarget)||void 0===r?void 0:r.value);case 3:a=t.sent,c=a.data,a.error,c&&n(c[0]),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();t()},children:i.map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.short_name},e.id)}))})]}):null})};var w=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),i=Object(o.a)(c,2),s=i[0],b=i[1],v=Object(r.useState)(!0),w=Object(o.a)(v,2),N=w[0],S=w[1],_=Object(r.useState)(!1),I=Object(o.a)(_,2),k=I[0],M=I[1],y=Object(r.useState)("150"),C=Object(o.a)(y,2),z=C[0],T=C[1],F=Object(r.useState)("7"),J=Object(o.a)(F,2),E=J[0],q=J[1],L=Object(r.useState)("14"),Z=Object(o.a)(L,2),B=Z[0],G=Z[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.from("races").select("*").eq("round","12");case 3:if(t=e.sent,n=t.data,r=t.error,n&&(a(n[0]),S(!1)),!r){e.next=9;break}throw r;case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),S(!1),M(!0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(r.useEffect)((function(){n&&b(function(e,t){var n=e.map((function(e){return j(e)})),r=Math.round(h(n)),a=n.filter((function(e){return e<r+t}));return[Math.min.apply(Math,Object(d.a)(a)),Math.max.apply(Math,Object(d.a)(a))]}(m(n),Number(E)))}),[n,E]);var P=Object(r.useMemo)((function(){return n?function(e,t){var n=e.map((function(e){return j(e)}));return Math.round(h(n))+t}(m(n),Number(E)):0}),[n,E]);return Object(O.jsxs)("div",{className:"app-wrapper",children:[Object(O.jsxs)("header",{className:"main-header",children:[Object(O.jsxs)("h1",{children:["Lap times heat map | ",null===n||void 0===n?void 0:n.race_name]}),Object(O.jsx)(g,{race:n,setRace:a})]}),Object(O.jsxs)("main",{children:[Object(O.jsxs)("div",{className:"settings-wrapper",children:[Object(O.jsxs)("div",{className:"settings-input",children:[Object(O.jsx)("label",{children:"adjust colors:"}),Object(O.jsx)("input",{type:"range",min:"0",max:"300",value:z,onChange:function(e){var t;T(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.value)}})]}),Object(O.jsxs)("div",{className:"settings-input",children:[Object(O.jsxs)("label",{children:["exclued times over: ",Object(O.jsx)("br",{}),Object(O.jsx)("b",{children:p(P)})]}),Object(O.jsx)("input",{type:"range",min:"1",max:"30",value:E,onChange:function(e){var t;q(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.value)}})]}),Object(O.jsxs)("div",{className:"settings-input",children:[Object(O.jsxs)("label",{children:["heat map size: ",B]}),Object(O.jsx)("input",{type:"range",min:"7",max:"20",value:B,onChange:function(e){var t;G(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.value)}})]})]}),N?Object(O.jsx)("p",{children:"loading..."}):null,k?Object(O.jsx)("p",{children:"There was a problem with data, please try again later."}):null,n?Object(O.jsx)("div",{className:"columns-wrapper",children:n.data.map((function(e,t){return e.timings&&Object(O.jsx)(x,{laps:e.timings,range:s,driver:e.driver,colors:z,fontSize:B},t)}))}):null]}),Object(O.jsxs)("footer",{children:[Object(O.jsxs)("p",{children:["lap times data:"," ",Object(O.jsx)("a",{href:"http://ergast.com/mrd/",children:"http://ergast.com/mrd/"})]}),Object(O.jsxs)("p",{children:["inspiration:"," ",Object(O.jsx)("a",{href:"https://www.reddit.com/r/formula1/comments/tps40h/2022_saudi_arabian_grand_prix_lap_time_heat_map/",children:"https://www.reddit.com/r/formula1/comments/tps40h/2022_saudi_arabian_grand_prix_lap_time_heat_map/"})]})]})]})},N=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,27)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root")),N()},9:function(e,t,n){}},[[23,2,3]]]);
//# sourceMappingURL=main.3ceacc9a.chunk.js.map