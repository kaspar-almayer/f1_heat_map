(this.webpackJsonpmatrix=this.webpackJsonpmatrix||[]).push([[1],{17:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(10),i=n.n(c),s=(n(17),n(0)),u=n.n(s),l=n(8),o=n(3),d=(n(9),n(4)),j=function(e){var t=e.split(":"),n=t[1].split("."),r=60*Number(t[0])+Number(n[0]);return Number("".concat(r,".").concat(n[1]))},b=function(e){var t=Math.floor(e/60),n=String((e%60).toFixed(3)).padStart(6,"0");return"".concat(t,":").concat(n)},p=function(e,t,n){if(e<t[0]||e>t[1])return"hsl(0, 0%, 50%)";var r=(e-t[0])*Number(n)/(t[1]-t[0]);return"hsl(".concat(r,", 100%, 50%)")},h=function(e){if(e.sort((function(e,t){return e-t})),e.length%2===0){var t=e.length/2;return(e[t-1]+e[t])/2}return e[Math.round(e.length/2)]},v=function(e){return e.data.reduce((function(e,t){return t.timings&&e.push(t.timings),e}),[]).flat()},m=n(1),f=function(e){var t=e.laps,n=e.range,r=e.driver,a=e.colors,c=e.fontSize;return Object(m.jsxs)("div",{className:"column",children:[Object(m.jsx)("p",{className:"driver-name",children:r}),t.map((function(e,t){return Object(m.jsx)("p",{style:{backgroundColor:p(j(e),n,a),fontSize:"".concat(c,"px")},children:e},t)}))]})},O=n(12),x=Object(O.a)("https://rkpsepkibztbweplxsli.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJrcHNlcGtpYnp0YndlcGx4c2xpIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTc0NzE4MDAsImV4cCI6MTk3MzA0NzgwMH0.-TsomBTEZlmHZ6cS3qqbF7f1G8OLsNSgMkquuPrt1PA");var g=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),i=Object(o.a)(c,2),s=i[0],p=i[1],O=Object(r.useState)([]),g=Object(o.a)(O,2),N=g[0],S=g[1],I=Object(r.useState)(!0),M=Object(o.a)(I,2),w=M[0],k=M[1],y=Object(r.useState)(!1),C=Object(o.a)(y,2),z=C[0],T=C[1],J=Object(r.useState)("150"),F=Object(o.a)(J,2),E=F[0],q=F[1],L=Object(r.useState)("7"),Z=Object(o.a)(L,2),B=Z[0],G=Z[1],P=Object(r.useState)("14"),Y=Object(o.a)(P,2),A=Y[0],H=Y[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.from("races").select("*").eq("round","11");case 3:return t=e.sent,n=t.data,r=t.error,e.next=8,x.from("races").select("id,short_name").order("round",{ascending:!1});case 8:if(c=e.sent,i=c.data,c.error,n&&(a(n[0]),k(!1)),i&&p(i),!r){e.next=15;break}throw r;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),k(!1),T(!0);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(r.useEffect)((function(){n&&S(function(e,t){var n=e.map((function(e){return j(e)})),r=Math.round(h(n)),a=n.filter((function(e){return e<r+t}));return[Math.min.apply(Math,Object(d.a)(a)),Math.max.apply(Math,Object(d.a)(a))]}(v(n),Number(B)))}),[n,B]);var X=Object(r.useMemo)((function(){return n?function(e,t){var n=e.map((function(e){return j(e)}));return Math.round(h(n))+t}(v(n),Number(B)):0}),[n,B]);return Object(m.jsxs)("div",{className:"app-wrapper",children:[Object(m.jsxs)("header",{className:"main-header",children:[Object(m.jsxs)("h1",{children:["Lap times heat map | ",null===n||void 0===n?void 0:n.race_name]}),Object(m.jsxs)("div",{className:"race-input",children:[Object(m.jsx)("label",{htmlFor:"races",children:"select race:"}),Object(m.jsx)("select",{name:"races",id:"races",value:null===n||void 0===n?void 0:n.id,onChange:function(e){var t=function(){var t=Object(l.a)(u.a.mark((function t(){var n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.from("races").select("*").eq("id",null===e||void 0===e||null===(n=e.currentTarget)||void 0===n?void 0:n.value);case 3:r=t.sent,c=r.data,r.error,c&&a(c[0]),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();t()},children:s.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.short_name},e.id)}))})]})]}),Object(m.jsxs)("main",{children:[Object(m.jsxs)("div",{className:"settings-wrapper",children:[Object(m.jsxs)("div",{className:"settings-input",children:[Object(m.jsx)("label",{children:"adjust colors:"}),Object(m.jsx)("input",{type:"range",min:"0",max:"300",value:E,onChange:function(e){var t;q(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.value)}})]}),Object(m.jsxs)("div",{className:"settings-input",children:[Object(m.jsxs)("label",{children:["exclued times over: ",b(X)]}),Object(m.jsx)("input",{type:"range",min:"1",max:"30",value:B,onChange:function(e){var t;G(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.value)}})]}),Object(m.jsxs)("div",{className:"settings-input",children:[Object(m.jsxs)("label",{children:["heat map size: ",A]}),Object(m.jsx)("input",{type:"range",min:"7",max:"20",value:A,onChange:function(e){var t;H(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.value)}})]})]}),w?Object(m.jsx)("p",{children:"loading..."}):null,z?Object(m.jsx)("p",{children:"There was a problem with data, please try again later."}):null,n?Object(m.jsx)("div",{className:"columns-wrapper",children:n.data.map((function(e,t){return e.timings&&Object(m.jsx)(f,{laps:e.timings,range:N,driver:e.driver,colors:E,fontSize:A},t)}))}):null]})]})},N=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,27)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(g,{})}),document.getElementById("root")),N()},9:function(e,t,n){}},[[23,2,3]]]);
//# sourceMappingURL=main.962ef22c.chunk.js.map